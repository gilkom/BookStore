<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<style>
	h1 { text-shadow: 2px 2px black;}
</style>
<head>
<meta charset="utf-8"/>
<title>Book Store Application</title>
</head>
<body>
<section>
	<div class="container-sm">
		<div class="jumbotron"  th:style="'background: url('+ @{/images/bookcase-1869616_1920.jpg} +');'">
				<h1 style="color:white;">Ksiegarnia internetowa</h1>
		</div>
	</div>
		<div class="container">	
			<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
				<ul class="navbar-nav">
					<li class="nav-item">
						<a class="nav-link" th:href="@{/}">Strona glowna</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/lista_ksiazek}">Ksiazki</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/lista_kategorii}">Kategorie</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/lista_wydawnictw}">Wydawnictwa</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/lista_autorow}">Autorzy</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/lista_pracownikow}">Pracownicy</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/lista_klientow}">Klienci</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/lista_opinii}">Opinie</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/lista_zamowien}">Zamówienia</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/}">Koszyk</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/}">Kontakt</a>
					</li>
				</ul>
			</nav>
			
		</div>

</section>
&nbsp;&nbsp;&nbsp;

<div class="container">
	<nav aria-label="breadcrumb">
		  <ol class="breadcrumb">
		    <li class="breadcrumb-item"><a href="/">Strona główna</a></li>
		    <li class="breadcrumb-item active" aria-current="/lista_ksiazek">Lista książek</li>
		  </ol>
		</nav>
	<h3>Książki</h3>
</div>

<div class="container" align="center">

    <nav class = "navbar navbar-dark bg-dark" style="background-color: #e3f2fd;">
		<form class="form-inline" th:action="@{/lista_ksiazek/page/1/}">
			<input type ="hidden" name="sortField" value="tytul_ksiazki"/>
		    <input type="hidden"  name="sortDir" value="asc"/>
		    <div class="md-form mt-0">
		    	<div class="col-xs-10">
			    	<input class= "form-control" placeholder="Szukaj" aria-label="Search" type="text" name="keyword" id="keyword" size="50" th:value="${keyword}" required />
			    	 <button class="btn btn-outline-success my-2 my-sm-0"  type="submit">Szukaj</button>
			    	 <input  class="btn btn-outline-success my-2 my-sm-0" type="button" value="Wyczyść" onClick=clearSearch() id="btnClear"  />
			    	 <a  style="text-align:right;" href="/nowa_ksiazka" class="btn btn-outline-success my-2 my-sm-0">Dodaj książkę</a>
		    	</div>	
		    </div>
		</form>
	</nav>
	
    <br/><br/>
    <table class="table">
        <thead>
            <tr>
            	<th> </th>
                <th>
                	<a th:href="@{'/lista_ksiazek/page/' + ${currentPage} + '?sortField=tytul_ksiazki&sortDir=' + ${reverseSortDir} +'&keyword=' + ${keyword}}">Tytuł</a>
                </th>
                <th>
                	<a th:href="@{'/lista_ksiazek/page/' + ${currentPage} + '?sortField=rok_wydania_ksiazki&sortDir=' + ${reverseSortDir} +'&keyword=' + ${keyword}}">Rok wydania</a>
                </th>
                <th>
                	<a th:href="@{'/lista_ksiazek/page/' + ${currentPage} + '?sortField=liczba_stron_ksiazki&sortDir=' + ${reverseSortDir} +'&keyword=' + ${keyword}}">Liczba stron</a>
                </th>
                <th>
                	<a th:href="@{'/lista_ksiazek/page/' + ${currentPage} + '?sortField=oprawa_ksiazki&sortDir=' + ${reverseSortDir} +'&keyword=' + ${keyword}}">Oprawa</a>
                </th>
                <th>
                	<a th:href="@{'/lista_ksiazek/page/' + ${currentPage} + '?sortField=wydawnictwo.nazwa_wydawnictwa&sortDir=' + ${reverseSortDir} +'&keyword=' + ${keyword}}">Nazwa wydawnictwa</a>
                </th>
                <th>Akcje</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="ksiazka : ${listKsiazka}">
            	<td>
            		<a th:href="@{'/wyswietl_ksiazke/' + ${ksiazka.id_ksiazki}}" >
            	 	<img th:src="@{/images/okladka.png}" alt="okladka" style="width:80px; height:100px">
            	 	
            	 	</a>
            	 </td>
                <td>
                 	<a th:href="@{'/wyswietl_ksiazke/' + ${ksiazka.id_ksiazki}}"   th:text="${ksiazka.tytul_ksiazki}"> </a>
                 </td>
                <td th:text="${ksiazka.rok_wydania_ksiazki}">Rok wydania</td>
                <td th:text="${ksiazka.liczba_stron_ksiazki}">Liczba stron</td>
                <td th:text="${ksiazka.oprawa_ksiazki}">Oprawa</td>
                <td th:text="${ksiazka.wydawnictwo.nazwa_wydawnictwa}">Nazwa wydawnictwa</td>
                <td>
                    <a th:href="@{'/edytuj_ksiazke/' + ${ksiazka.id_ksiazki}}" class="btn btn-warning btn-sm">Edytuj</a>

                     <form method="get" action="@{/lista_ksiazek/usun_ksiazke/' + ${ksiazka.id_ksiazki}}"
                    		onclick="return confirm('Jesteś pewien, że chcesz usunąć tę książkę') ? true : false;">
                    		
                    	<a th:href="@{'/usun_ksiazke/' + ${ksiazka.id_ksiazki}}" class="btn btn-danger btn-sm">Usun</a>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
</div>  
<div th:if="${totalPages > 1}" class="container">
		Suma książek: [[${totalItems}]]
		&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;
<a th:if="${currentPage > 1}" th:href="@{'/lista_ksiazek/page/1' + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&keyword=' + ${keyword}}">Pierwsza</a>
		<span th:unless="${currentPage > 1}">Pierwsza</span>
		&nbsp;&nbsp;
		
		<a th:if="${currentPage > 1}" th:href="@{'/lista_ksiazek/page/' + ${currentPage - 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&keyword=' + ${keyword}}">Poprzednia</a>
		<span th:unless="${currentPage > 1}">Poprzednia</span>
		
		&nbsp;&nbsp;
		
		<span th:each="i: ${#numbers.sequence(1, totalPages)}">
			<a th:if="${currentPage != i}" th:href="@{'/lista_ksiazek/page/' + ${i} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&keyword=' + ${keyword}}">[[${i}]]</a>
			<span th:unless="${currentPage != i}">[[${i}]]</span>
			&nbsp;
		</span>
		
		<a th:if="${currentPage < totalPages}" th:href="@{'/lista_ksiazek/page/' + ${currentPage + 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&keyword=' + ${keyword}}">Następna</a>
		<span th:unless="${currentPage < totalPages}">Następna</span>
		&nbsp;&nbsp;
		
		<a th:if="${currentPage < totalPages}" th:href="@{'/lista_ksiazek/page/' + ${totalPages} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&keyword=' + ${keyword}}">Ostatnia</a>
		<span th:unless="${currentPage < totalPages}">Ostatnia</span>
		<br><br>
	</div>
&nbsp;&nbsp;&nbsp;
<div class="text-center">
	<p>Ksiegarnia Internetowa - BookStore </p>
</div>

<script type="text/javascript">
    function clearSearch() {
        window.location = "[[@{/lista_ksiazek}]]";
    }
</script>

</body>
</html>

